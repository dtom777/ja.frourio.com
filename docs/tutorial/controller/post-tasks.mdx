---
id: post-tasks
title: POST - /tasks
---

<br />

```ts title="server/types/index.ts"
export type Task = {
  id: number
  label: string
  done: boolean
}
```

```ts title="server/api/tasks/index.ts"
import { Task } from '$/types' // path alias $ -> server

export type Methods = {
  post: {
    reqBody: Pick<Task, 'label'>
    status: 201 // optional
    resBody: Task
  }
}
```

```ts title="server/api/tasks/controller.ts"
import { defineController } from './$relay' // '$relay.ts' is automatically generated by frourio
import { createTask } from '$/service/tasks'

export default defineController(() => ({
  post: async ({ body }) => {
    const task = await createTask(body.label)

    return { status: 201, body: task }
  }
}))
```

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  defaultValue="prisma"
  values={[
    { label: 'Prisma', value: 'prisma' },
    { label: 'TypeORM', value: 'typeorm' },
    { label: 'None', value: 'none' },
  ]
}>
<TabItem value="prisma">

[Prisma schema](https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema)

```text title="server/prisma/schema.prisma"
model Task {
  id    Int     @id @default(autoincrement())
  label String
  done  Boolean @default(false)
}
```

[Prisma#create](https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/crud#create)

```ts title="server/service/tasks.ts"
import { PrismaClient } from '@prisma/client'
import { Task } from '$prisma/client' // path alias $prisma -> ./node_modules/.prisma/*

const prisma = new PrismaClient()

export const createTask = (label: Task['label']) =>
  prisma.task.create({ data: { label } })
```

</TabItem>
<TabItem value="typeorm">

[TypeORM entities](https://typeorm.io/#/entities)

```ts title="server/entity/Task.ts"
import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm'

@Entity()
export class Task {
  @PrimaryGeneratedColumn()
  id: number

  @Column({ length: 100 })
  label: string

  @Column({ default: false })
  done: boolean
}
```

[TypeORM#save](https://typeorm.io/#/repository-api)

```ts title="server/service/tasks.ts"
import { getRepository } from 'typeorm'
import { Task } from '$/entity/Task'

const taskRepository = () => getRepository(Task)

export const createTask = (label: Task['label']) => {
  const task = new Task()
  task.label = label
  return taskRepository().save(task)
}
```

</TabItem>
<TabItem value="none">

```ts title="server/service/tasks.ts"
import fs from 'fs'
import { Task } from '$/types'

type DB = {
  nextId: number
  tasks: Task[]
}

const dbPath = 'database.json'

const readDB = async (): Promise<DB> =>
  JSON.parse(await fs.promises.readFile(dbPath, 'utf8'))
const writeDB = (db: DB) =>
  fs.promises.writeFile(dbPath, JSON.stringify(db), 'utf8')

if (!fs.existsSync(dbPath)) {
  fs.writeFileSync(dbPath, JSON.stringify({ nextId: 0, tasks: [] }), 'utf8')
}

export const createTask = async (label: Task['label']) => {
  const db = await readDB()
  const task = { id: db.nextId, label, done: false }
  await writeDB({ nextId: db.nextId + 1, tasks: [...db.tasks, task] })
  return task
}
```

</TabItem>
</Tabs>

<Tabs
  defaultValue="next"
  values={[
    { label: 'Next.js', value: 'next' },
    { label: 'Nuxt.js', value: 'nuxt' },
  ]
}>
<TabItem value="next">

Use [aspida](https://github.com/aspida/aspida) for the frontend HTTP client.  
(Frourio and aspida are maintained by the same developer)

```ts title="pages/index.tsx"
import useAspidaSWR from '@aspida/swr'
import { apiClient } from '~/utils/apiClient'

await apiClient.tasks.post({ body: { label: 'new label' } })
```

</TabItem>
<TabItem value="nuxt">

Use [aspida](https://github.com/aspida/aspida) for the frontend HTTP client.  
(Frourio and aspida are maintained by the same developer)

```ts title="pages/index.vue"
import Vue from 'vue'

export default Vue.extend({
  async createTask() {
    await this.$api.tasks.post({ body: { label: 'new label' } })
  },
})
```

</TabItem>
</Tabs>
