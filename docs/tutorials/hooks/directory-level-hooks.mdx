---
id: directory-level-hooks
title: Directory-level hooks
---

Directory-level hooks are called at the current and subordinate endpoints.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  defaultValue="fastify"
  values={[
    { label: 'fastify', value: 'fastify' },
    { label: 'express', value: 'express' },
  ]
}>
<TabItem value="fastify">

[Fastify hooks](https://www.fastify.io/docs/latest/Hooks/)

```ts title="server/api/tasks/hooks.ts"
import { defineHooks } from './$relay' // '$relay.ts' is automatically generated by frourio

export default defineHooks(() => ({
  onRequest: [
    (req, reply, done) => {
      console.log('Directory-level onRequest first hook:', req.url)
      done()
    },
    (req, reply, done) => {
      console.log('Directory-level onRequest second hook:', req.url)
      done()
    }
  ],
  preParsing: (req, reply, payload, done) => {
    console.log('Directory-level preParsing single hook:', req.url)
    done()
  }
}))
```

</TabItem>
<TabItem value="express">

[Express middleware](https://expressjs.com/en/guide/using-middleware.html)

```ts title="server/api/tasks/hooks.ts"
import { defineHooks } from './$relay' // '$relay.ts' is automatically generated by frourio

export default defineHooks(() => ({
  onRequest: [
    (req, res, next) => {
      console.log('Directory-level onRequest first hook:', req.path)
      next()
    },
    (req, res, next) => {
      console.log('Directory-level onRequest second hook:', req.path)
      next()
    }
  ],
  preParsing: (req, res, next) => {
    console.log('Directory-level preParsing single hook:', req.path)
    next()
  }
}))
```

</TabItem>
</Tabs>

<br />

:::info
Directory-level hooks are cascading, so `server/api/hooks.ts` is effectively Global Hooks.
:::
